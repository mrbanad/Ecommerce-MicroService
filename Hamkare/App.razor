@using Hamkare.Settings
@using Hamkare.Pages.Themes.Default.Shared
@inject NavigationManager NavigationManager

@* <CascadingAuthenticationState> *@
@* *@
@* <ErrorBoundary> *@
@* *@
@*     <Router AppAssembly="@typeof(Program).Assembly"> *@
@* *@
@*         <Found Context="routeData"> *@
@*             <AuthorizeRouteView RouteData="@routeData" DefaultLayout="@Type.GetType(string.Format(ThemeSetting.ThemeMainLayoutPath, ThemeSetting.ActiveTheme))"> *@
@*                    <Authorizing> *@
@*                                     <text>Authorizing user, please wait...</text> *@
@*                                 </Authorizing> *@
@*                                 <NotAuthorized> *@
@*                                     <text>Sorry, you are not authorized to access this page.</text> *@
@*                                 </NotAuthorized> *@
@*             </AuthorizeRouteView> *@
@*         </Found> *@
@* *@
@*         <NotFound> *@
@*             <LayoutView Layout="@typeof(Hamkare.Pages.Themes.Default.Shared.DefaultLayout)"> *@
@*                 @{ *@
@*                     NavigationManager.NavigateTo("NotFound"); *@
@*                 } *@
@*                 ; *@
@*             </LayoutView> *@
@*         </NotFound> *@
@* *@
@*     </Router> *@
@* *@
@* </ErrorBoundary> *@
@* *@
@* </CascadingAuthenticationState> *@

<CascadingAuthenticationState>
    <Router AppAssembly="@typeof(App).Assembly">
        <Found Context="routeData">
            <RouteView RouteData="@routeData" DefaultLayout="@typeof(DefaultLayout)"/>
        </Found>
        <NotFound>
            <PageTitle>Not found</PageTitle>
            <LayoutView Layout="@typeof(DefaultLayout)">
                <p role="alert">Sorry, there's nothing at this address.</p>
            </LayoutView>
        </NotFound>
    </Router>
</CascadingAuthenticationState>


@code{

    protected override void OnInitialized()
    {
        ThemeSetting.OnChange += StateHasChanged;
    }

}